<!--*******************************************************************************
	Copyright(c) 2012-2014 KEYENCE CORPORATION. All rights reserved.
******************************************************************************* -->
<!DOCTYPE html>
<head>
    <title>Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <style>
        button, input {margin: 3px;font-size: 110%;}
        textarea {margin: 5px;font-size: 100%; width:100%;}
        h2 {margin: 10px; color: grey}
    </style>
</head>
<body>
    <h2>Scanner</h2>
    <button onclick="onStartButton()">3:黄色</button>
    <button onclick="onStopButton()">5:マゼンタ</button>
    <br>
    <textarea id="result" placeholder="scan result"></textarea>
    <br>
    <h2>Notification</h2>
    <button onclick="onSuccess()">正常</button>
    <button onclick="onWarning()">警告</button>
    <button onclick="onFailure()">失敗</button>
</body>
<script src="kjs-modules.js"></script>

<script>

    window.onload = function() {
	//Set Callback Event as a Scan Event
        KJS.Scanner.setReadCallback('resultCallback');
        console.log(window.KJS?.Notification);
        console.log(window.KJS?.Scanner?._scanManager);
        console.log(window.KJS?.Scanner?.setReadCallback);
    }

    //Event on code scanned.
    // function resultCallback(result) {
    //     document.getElementById("result").innerText = result.mStringData;
    // }

    //Scan
    function onStartButton() {
	//KJS.Scanner.startRead();
    KJS.Notification.startLed(3,300,0,1);
    KJS.Notification.startBuzzer(12,200,100,2);
    }

    function onStopButton() {
	//KJS.Scanner.stopRead();
    KJS.Notification.startLed(5,300,0,1);
    KJS.Notification.startBuzzer(11,200,100,2);
    }


    //Notification
    function onSuccess() {
        //startLed(1:緑、2:赤、3:黄、4:シアン、5:マゼンタ、6:青、7:白, onPeriod, offPeriod, repeat);
        //startBuzzer(tone, onPeriod, offPeriod, repeatCount);
        //startVibrator(onPeriod, offPeriod, repeatCount);
        //正常書き込み成功時は何もしない。読取成功と被って感触悪い。
        // KJS.Notification.startLed(1,300,0,1);
        // KJS.Notification.startBuzzer(16,200,0,1);
        // KJS.Notification.startVibrator(100,0,1);
    }

    function onWarning() {
        KJS.Notification.startLed(4,200,100,2);
        KJS.Notification.startBuzzer(9,200,100,2);
        KJS.Notification.startVibrator(200,100,2);
    }

    function onFailure() { 
        KJS.Notification.startLed(2,200,100,2);   
        KJS.Notification.startBuzzer(8,200,100,2);
        KJS.Notification.startVibrator(200,100,2);
    }


</script>
